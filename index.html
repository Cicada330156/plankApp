<body>
    <audio id="doneSound" src="zapsplat_multimedia_game_tone_bright_positive_gain_award_007_25488.mp3" preload="auto"></audio>
    
    <button id="startButton" onclick="
        let length = Math.random()*(maxPlank-minPlank)+minPlank;
        doneSound.onended = function () {
            alert('Your '+Math.round(length)+' second plank is done!');
            document.getElementById('message').innerHTML = '';
        }
    
        setTimeout(() => {
            doneSound.play();
            
            document.getElementById('message').innerHTML = 'Done';
        },length*1000);
        
        document.getElementById('message').innerHTML = 'Timer started';
    ">START</button>
    
    <h1 id="message"></h1>
    
    <br><br><h3>Update min/max times:</h3>
    <form id="lengthSettings">
        Minimum length (default 30): <input type="number" name="minVal" value="30"><br>
        Maximum length (default 60): <input type="number" name="maxVal" value="60"><br>
    </form>
    <button onclick="updatePlankInterval()">Update</button>
    <p id="updateStatus"></p>
    
    
    
    <script>
        minPlank = 30;
        maxPlank = 60;
        const doneSound = new Audio('zapsplat_multimedia_game_tone_bright_positive_gain_award_007_25488.mp3');
        
        //necessary to guarantee user interaction in order to pla
        //alert("Start timer for between "+minPlank+" and "+maxPlank+" seconds?");
        
        
        function startTimer() {
            let length = Math.random()*(maxPlank-minPlank)+minPlank;
            doneSound.onended = function () {
                alert("Your "+Math.round(length)+" second plank is done!");
                document.getElementById('message').innerHTML = "";
            }
        
            setTimeout(() => {
                doneSound.play();
                //alert("Done. Reload page to restart.");
                //document.getElementById('doneSound').play(); //https://stackoverflow.com/questions/21815323/have-sound-play-when-alert-is-triggered
                
                document.getElementById('message').innerHTML = "Done";
            },length*1000);
            
            document.getElementById('message').innerHTML = "Timer started";
        }
        
        function updatePlankInterval() {
            data = document.getElementById("lengthSettings");
            if(data.minVal.value <= 0 || data.maxVal.value <= 0) {
                ///@TODO Output that it's no bueno
            }else if(data.minVal.value > data.maxVal.value){
                ///@TODO Output that it's no bueno
            }else{
                minPlank = data.minVal.value;
                maxPlank = data.maxVal.value;
                document.getElementById('updateStatus').innerHTML = "New min: " + minPlank + ", new max: " + maxPlank;
                setTimeout(() => {
                    document.getElementById('updateStatus').innerHTML = "";
                }, 3000);
            }
        }
    </script>
</body>